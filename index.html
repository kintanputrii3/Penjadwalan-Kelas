<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Info D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Mystic Night Color Palette */
        :root {
            --cinder: #0D121C;
            --yankees-blue: #1B2A41;
            --cool-grey: #8E9AAF;
            --light-grey: #A9B4C2;
            --white: #FFFFFF;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--cinder);
            transition: background-image 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .bg-blur {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .scroll-container {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .scroll-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
        .card {
            background-color: rgba(13, 18, 28, 0.7); /* Cinder with opacity */
            border: 1px solid rgba(142, 154, 175, 0.2); /* Cool Grey border */
        }
        .btn-primary {
            background-color: var(--yankees-blue);
            color: var(--white);
            border: 1px solid var(--cool-grey);
        }
        .btn-primary:hover {
            background-color: #2a4163; /* Darker Yankees Blue */
        }
        .btn-secondary {
             background-color: var(--cool-grey);
             color: var(--cinder);
        }
        .btn-secondary:hover {
            background-color: var(--light-grey);
        }
        .input-field {
            background-color: var(--yankees-blue);
            border: 1px solid var(--cool-grey);
        }
        .input-field:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--light-grey);
        }
        .text-accent {
            color: var(--cool-grey);
        }
        .text-accent-light {
             color: var(--light-grey);
        }
        .border-accent {
            border-color: var(--cool-grey);
        }
         .border-accent-light {
            border-color: var(--light-grey);
        }
    </style>
</head>
<body class="text-white selection:bg-blue-500 selection:text-white">

    <div id="app" class="min-h-screen flex items-center justify-center p-4">

        <!-- Initial Role Selection -->
        <div id="initial-view" class="w-full max-w-md">
            <div class="card bg-blur p-8 rounded-2xl shadow-2xl text-center">
                 <img src="https://placehold.co/120x120/0D121C/8E9AAF?text=Dokkaebi" alt="Dokkaebi Chibi" class="mx-auto mb-4 w-24 h-24 rounded-full border-2 border-accent">
                <h1 class="text-4xl font-bold text-accent-light">Pilih Peranmu</h1>
                <p class="text-accent mt-2 mb-8">「 Skenario ini membutuhkan partisipasimu, Inkarnasi. 」</p>
                <div class="space-y-4">
                    <button onclick="showLoginView('user')" class="w-full btn-primary font-bold py-3 px-4 rounded-lg transition duration-300 shadow-lg text-lg">Masuk sebagai Pengguna</button>
                    <button onclick="showLoginView('admin')" class="w-full btn-secondary font-bold py-3 px-4 rounded-lg transition duration-300 shadow-lg text-lg">Masuk sebagai Admin</button>
                </div>
            </div>
        </div>

        <!-- User Login Section -->
        <div id="user-login-section" class="hidden w-full max-w-md">
            <div class="card bg-blur p-8 rounded-2xl shadow-2xl">
                <div class="text-center mb-8">
                     <img src="https://placehold.co/100x100/0D121C/8E9AAF?text=Konstelasi" alt="Konstelasi" class="mx-auto mb-4 w-20 h-20 rounded-full border-2 border-accent">
                    <h1 class="text-4xl font-bold text-accent">Portal Pengguna</h1>
                    <p class="text-gray-400 mt-2">Selamat datang, Konstelasi.</p>
                </div>
                <form id="user-login-form">
                    <div class="mb-4">
                        <label for="user-username" class="block mb-2 text-sm font-medium text-accent">Nama Panggilan</label>
                        <input type="text" id="user-username" class="w-full input-field rounded-lg px-4 py-2 text-white transition duration-200" required>
                    </div>
                    <div class="mb-6">
                        <label for="user-password" class="block mb-2 text-sm font-medium text-accent">Kata Sandi</label>
                        <input type="password" id="user-password" class="w-full input-field rounded-lg px-4 py-2 text-white transition duration-200" required>
                    </div>
                     <p id="user-login-error" class="text-red-400 text-sm mb-4 text-center hidden"></p>
                    <button type="submit" class="w-full btn-primary font-bold py-2 px-4 rounded-lg transition duration-300 shadow-lg">Masuk</button>
                    <button type="button" onclick="showInitialView()" class="w-full text-center text-gray-400 hover:text-white mt-4 text-sm">Kembali</button>
                </form>
            </div>
        </div>
        
        <!-- Admin Login Section -->
        <div id="admin-login-section" class="hidden w-full max-w-md">
            <div class="card bg-blur p-8 rounded-2xl shadow-2xl">
                <div class="text-center mb-8">
                    <img src="https://placehold.co/100x100/0D121C/A9B4C2?text=Bintang" alt="Rasi Bintang" class="mx-auto mb-4 w-20 h-20 rounded-full border-2 border-accent-light">
                    <h1 class="text-4xl font-bold text-accent-light">Panel Admin</h1>
                    <p class="text-gray-400 mt-2">Kelola probabilitas skenario.</p>
                </div>
                <form id="admin-login-form">
                    <div class="mb-4">
                        <label for="admin-username" class="block mb-2 text-sm font-medium text-accent-light">Nama Panggilan</label>
                        <input type="text" id="admin-username" value="admin" class="w-full input-field rounded-lg px-4 py-2 text-white transition duration-200" required>
                    </div>
                    <div class="mb-6">
                        <label for="admin-password" class="block mb-2 text-sm font-medium text-accent-light">Kata Sandi</label>
                        <input type="password" id="admin-password" class="w-full input-field rounded-lg px-4 py-2 text-white transition duration-200" required>
                    </div>
                     <p id="admin-login-error" class="text-red-400 text-sm mb-4 text-center hidden"></p>
                    <button type="submit" class="w-full btn-secondary font-bold py-2 px-4 rounded-lg transition duration-300 shadow-lg">Masuk</button>
                    <button type="button" onclick="showInitialView()" class="w-full text-center text-gray-400 hover:text-white mt-4 text-sm">Kembali</button>
                </form>
            </div>
        </div>

        <!-- User Dashboard -->
        <div id="user-dashboard" class="hidden w-full max-w-7xl">
            <!-- User Header -->
            <div class="card bg-blur p-6 rounded-2xl shadow-2xl mb-6 flex justify-between items-center">
                <div>
                    <h2 class="text-3xl font-bold text-accent">Dasbor Konstelasi</h2>
                    <p id="user-welcome" class="text-gray-300"></p>
                </div>
                <button id="user-logout-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">Keluar</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- User Notifications -->
                <div class="lg:col-span-1">
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl h-full">
                        <h3 class="text-2xl font-bold mb-4 text-accent">Pesan Sistem</h3>
                        <div id="user-notifications" class="space-y-3 max-h-[150px] overflow-y-auto scroll-container">
                            <!-- Notifications will be injected here -->
                        </div>
                    </div>
                </div>
                 <!-- Picket Schedule -->
                <div class="lg:col-span-1">
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl h-full">
                        <h3 class="text-2xl font-bold mb-4 text-accent">Sub-Skenario: Piket</h3>
                        <div id="user-picket-schedule">
                            <!-- User's picket schedule will be injected here -->
                        </div>
                    </div>
                </div>
                <!-- Full Class Schedule -->
                <div class="lg:col-span-3">
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-accent">Jadwal Skenario Utama</h3>
                        <div id="user-class-schedule" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                            <!-- Class schedule will be injected here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="hidden w-full max-w-7xl">
             <!-- Admin Header -->
            <div class="card bg-blur p-6 rounded-2xl shadow-2xl mb-6 flex justify-between items-center">
                <div>
                    <h2 class="text-3xl font-bold text-accent-light">Dasbor Dokkaebi</h2>
                    <p class="text-gray-300">Selamat datang, Dokkaebi!</p>
                </div>
                <button id="admin-logout-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300">Keluar</button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Manage Schedules -->
                <div>
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-accent-light">Kelola Skenario Utama</h3>
                        <div id="admin-class-schedule-list" class="space-y-4 max-h-[300px] overflow-y-auto scroll-container pr-2">
                           <!-- Admin schedule management UI -->
                        </div>
                         <div class="mt-4">
                            <h4 class="font-semibold mb-2 text-lg">Tambah Skenario</h4>
                            <form id="add-lesson-form" class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                                <select id="add-lesson-day" class="input-field rounded-lg px-3 py-2 text-white">
                                    <option>Senin</option><option>Selasa</option><option>Rabu</option><option>Kamis</option><option>Jumat</option>
                                </select>
                                <input type="text" id="add-lesson-name" placeholder="Nama Skenario" class="input-field rounded-lg px-3 py-2 text-white" required>
                                <input type="text" id="add-lesson-time" placeholder="00.00-00.00" class="input-field rounded-lg px-3 py-2 text-white" required>
                                <button type="submit" class="sm:col-span-3 w-full btn-secondary font-bold py-2 rounded-lg transition duration-300 mt-2">Tambah</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                 <!-- Manage Pickets -->
                <div>
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-accent-light">Kelola Sub-Skenario</h3>
                        <div id="admin-picket-schedule-list" class="space-y-4 max-h-[300px] overflow-y-auto scroll-container pr-2">
                           <!-- Admin picket management UI -->
                        </div>
                        <div class="mt-4">
                            <h4 class="font-semibold mb-2 text-lg">Tambah Partisipan</h4>
                            <form id="add-picket-form" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                                <select id="add-picket-day" class="input-field rounded-lg px-3 py-2 text-white">
                                    <option>Senin</option><option>Selasa</option><option>Rabu</option><option>Kamis</option><option>Jumat</option>
                                </select>
                                <input type="text" id="add-picket-name" placeholder="Nama Inkarnasi" class="input-field rounded-lg px-3 py-2 text-white" required>
                                <button type="submit" class="sm:col-span-2 w-full btn-secondary font-bold py-2 rounded-lg transition duration-300 mt-2">Tambah</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Send Notifications -->
                <div class="lg:col-span-2">
                    <div class="card bg-blur p-6 rounded-2xl shadow-2xl">
                        <h3 class="text-2xl font-bold mb-4 text-accent-light">Kirim Pesan Sistem</h3>
                        <form id="send-notification-form">
                            <div class="mb-4">
                                <label for="notification-target" class="block mb-2 text-sm font-medium text-gray-300">Kirim Ke</label>
                                <select id="notification-target" class="w-full input-field rounded-lg px-4 py-2 text-white">
                                    <option value="all">Semua Pengguna</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="notification-message" class="block mb-2 text-sm font-medium text-gray-300">Pesan</label>
                                <textarea id="notification-message" rows="3" class="w-full input-field rounded-lg px-4 py-2 text-white" required></textarea>
                            </div>
                            <button type="submit" class="w-full btn-primary font-bold py-2 rounded-lg transition duration-300">Kirim</button>
                        </form>
                        <div class="mt-6">
                            <h4 class="text-xl font-semibold mb-3">Riwayat Notifikasi</h4>
                            <div id="notification-history" class="space-y-2 max-h-[150px] overflow-y-auto scroll-container pr-2">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
    <script>
        const loginBgUrl = "url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2071&auto=format&fit=crop')";
        const dashboardBgUrl = "url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1841&auto=format&fit=crop')";

        // --- DATABASE (SIMULATED) ---
        let users = {
            'Nabil': 'user123', 'Malia': 'user123', 'Sultan': 'user122', 'Nasya': 'user123',
            'Naya': 'user123', 'Hasna': 'user123', 'Kintan': 'user123', 'Nadia': 'user123',
            'Farhan': 'user123', 'Chairil': 'user123', 'Syakilla': 'user123', 'Zahra': 'user123',
            'Aldebaran': 'user123', 'Aulia': 'user123', 'Heni': 'user123', 'Luna': 'user123',
            'Resti': 'user123', 'Denian': 'user123', 'Raka': 'user123', 'Syafira': 'user123',
            'Fajri': 'user123', 'Ridhan': 'user123', 'Naisya': 'user123', 'Puspita': 'user123',
            'Rizqy': 'user123', 'Maya': 'user123', 'Anzilah': 'user123', 'Ghaisan': 'user123',
            'Rafa': 'user123', 'Putri': 'user123', 'Fadhillah': 'user123', 'Syifa': 'user123',
            'Daiva': 'user123', 'Keisha': 'user123', 'Ayya': 'user123', 'Iyan': 'user123'
        };
        
        let classSchedule = {
            Senin: [
                { subject: 'Bahasa Indonesia', time: '07.15-09.30' },
                { subject: 'Informatika', time: '09.45-12.00' },
                { subject: 'Bimbingan Konseling', time: '12.45-13.30' },
                { subject: 'Geografi', time: '13.30-15.00' },
            ],
            Selasa: [
                { subject: 'Bahasa Sunda', time: '06.30-08.00' },
                { subject: 'PJOK', time: '08.00-09.30' },
                { subject: 'Sejarah', time: '09.45-11.15' },
                { subject: 'Bimbingan Konseling', time: '11.15-12.00' },
                { subject: 'Bahasa Inggris', time: '12.45-15.00' },
            ],
            Rabu: [
                { subject: 'PPKN', time: '06.30-08.00' },
                { subject: 'Informatika', time: '08.00-09.30' },
                { subject: 'Fisika', time: '09.45-12.00' },
                { subject: 'Geografi', time: '12.45 - 15.00' },
            ],
            Kamis: [
                { subject: 'Fisika', time: '06.30-08.00' },
                { subject: 'Pendidikan Agama Islam', time: '08.00-09.30' },
                { subject: 'Biologi', time: '09.45-12.00' },
                { subject: 'Matematika', time: '12.45-15.00' },
            ],
            Jumat: [
                { subject: 'PKWU', time: '07.10-08.30' },
                { subject: 'Seni Budaya', time: '08.30-10.05' },
                { subject: 'Biologi', time: '10.05-11.25' },
            ]
        };

        let picketSchedule = {
            Senin: ['Nabil', 'Malia', 'Sultan', 'Nasya', 'Naya', 'Hasna', 'Kintan', 'Nadia'],
            Selasa: ['Farhan', 'Chairil', 'Syakilla', 'Zahra', 'Aldebaran', 'Aulia', 'Heni'],
            Rabu: ['Luna', 'Resti', 'Denian', 'Raka', 'Syafira', 'Fajri', 'Ridhan'],
            Kamis: ['Naisya', 'Puspita', 'Rizqy', 'Maya', 'Anzilah', 'Ghaisan', 'Rafa'],
            Jumat: ['Putri', 'Fadhillah', 'Syifa', 'Daiva', 'Keisha', 'Ayya', 'Iyan']
        };

        let notifications = [
            { id: 1, target: 'all', message: 'Selamat datang di aplikasi Class Info D!' },
            { id: 2, target: 'Nabil', message: 'Jangan lupa tugas Bahasa Indonesia dikumpulkan besok.'}
        ];
        
        let loggedInUser = null;

        // --- DOM ELEMENTS ---
        const initialView = document.getElementById('initial-view');
        const userLoginSection = document.getElementById('user-login-section');
        const adminLoginSection = document.getElementById('admin-login-section');
        const userDashboard = document.getElementById('user-dashboard');
        const adminDashboard = document.getElementById('admin-dashboard');

        // --- RENDER FUNCTIONS ---
        const views = [initialView, userLoginSection, adminLoginSection, userDashboard, adminDashboard];
        
        function showView(viewToShow) {
            views.forEach(view => {
                if (view === viewToShow) {
                    view.classList.remove('hidden');
                } else {
                    view.classList.add('hidden');
                }
            });
        }
        
        function setBackground(type) {
             document.body.style.backgroundImage = type === 'login' ? loginBgUrl : dashboardBgUrl;
        }

        window.showInitialView = function() {
            setBackground('login');
            showView(initialView);
        }

        window.showLoginView = function(type) {
            if (type === 'user') {
                showView(userLoginSection);
            } else {
                showView(adminLoginSection);
            }
        }

        function renderUserDashboard() {
            document.getElementById('user-welcome').textContent = `Selamat datang, Inkarnasi ${loggedInUser}!`;

            // Render Class Schedule
            const classContainer = document.getElementById('user-class-schedule');
            classContainer.innerHTML = '';
            for (const day in classSchedule) {
                const dayCard = document.createElement('div');
                dayCard.className = 'bg-yankees-blue bg-opacity-50 p-4 rounded-lg';
                let lessonsHTML = `<h4 class="font-bold text-lg mb-2 text-cool-grey">${day}</h4><ul class="space-y-1 text-sm">`;
                classSchedule[day].forEach(lesson => {
                    lessonsHTML += `<li class="text-gray-200"><span class="font-semibold">${lesson.subject}</span><br><span class="text-gray-400">${lesson.time}</span></li>`;
                });
                lessonsHTML += '</ul>';
                dayCard.innerHTML = lessonsHTML;
                classContainer.appendChild(dayCard);
            }

            // Render Picket Schedule
            const picketContainer = document.getElementById('user-picket-schedule');
            picketContainer.innerHTML = '<p class="text-gray-400">Anda tidak memiliki jadwal piket.</p>';
            for (const day in picketSchedule) {
                if (picketSchedule[day].includes(loggedInUser)) {
                    let picketHTML = `<h4 class="font-bold text-lg text-cool-grey">${day}</h4><ul class="list-disc list-inside mt-2">`;
                    picketSchedule[day].forEach(name => {
                        picketHTML += `<li class="${name === loggedInUser ? 'font-bold text-white' : 'text-gray-300'}">${name}</li>`;
                    });
                    picketHTML += '</ul>';
                    picketContainer.innerHTML = picketHTML;
                    break;
                }
            }

            // Render Notifications
            const notifContainer = document.getElementById('user-notifications');
            const userNotifs = notifications.filter(n => n.target === 'all' || n.target === loggedInUser);
            if (userNotifs.length > 0) {
                 notifContainer.innerHTML = '';
                 userNotifs.reverse().forEach(n => { 
                    const notifEl = document.createElement('div');
                    notifEl.className = 'bg-yankees-blue bg-opacity-40 p-3 rounded-lg text-sm';
                    notifEl.innerHTML = `<p class="text-gray-200">${n.message}</p><span class="text-xs text-gray-400">Untuk: ${n.target === 'all' ? 'Semua' : n.target}</span>`;
                    notifContainer.appendChild(notifEl);
                 });
            } else {
                 notifContainer.innerHTML = '<p class="text-gray-400 text-sm">Tidak ada pesan sistem.</p>';
            }
        }

        function renderAdminDashboard() {
            renderAdminClassSchedule();
            renderAdminPicketSchedule();
            renderNotificationManager();
        }

        function renderAdminClassSchedule() {
            const container = document.getElementById('admin-class-schedule-list');
            container.innerHTML = '';
            for (const day in classSchedule) {
                const dayGroup = document.createElement('div');
                let lessonsHTML = `<h4 class="font-bold text-lg text-light-grey">${day}</h4>`;
                classSchedule[day].forEach((lesson, index) => {
                    lessonsHTML += `
                        <div class="flex justify-between items-center bg-yankees-blue p-2 rounded-md mt-1">
                            <div>
                                <p class="font-semibold">${lesson.subject}</p>
                                <p class="text-sm text-gray-400">${lesson.time}</p>
                            </div>
                            <button onclick="deleteLesson('${day}', ${index})" class="text-red-400 hover:text-red-300 text-xs">Hapus</button>
                        </div>
                    `;
                });
                dayGroup.innerHTML = lessonsHTML;
                container.appendChild(dayGroup);
            }
        }

        function renderAdminPicketSchedule() {
            const container = document.getElementById('admin-picket-schedule-list');
            container.innerHTML = '';
             for (const day in picketSchedule) {
                const dayGroup = document.createElement('div');
                let picketsHTML = `<h4 class="font-bold text-lg text-light-grey">${day}</h4>`;
                picketSchedule[day].forEach((name, index) => {
                    picketsHTML += `
                        <div class="flex justify-between items-center bg-yankees-blue p-2 rounded-md mt-1">
                            <p class="font-semibold">${name}</p>
                            <button onclick="deletePicket('${day}', ${index})" class="text-red-400 hover:text-red-300 text-xs">Hapus</button>
                        </div>
                    `;
                });
                dayGroup.innerHTML = picketsHTML;
                container.appendChild(dayGroup);
            }
        }
        
        function renderNotificationManager() {
            const targetSelect = document.getElementById('notification-target');
            const currentVal = targetSelect.value;
            targetSelect.innerHTML = '<option value="all">Semua Pengguna</option>';
            Object.keys(users).forEach(username => {
                targetSelect.innerHTML += `<option value="${username}">${username}</option>`;
            });
            targetSelect.value = currentVal;
            
            const historyContainer = document.getElementById('notification-history');
            historyContainer.innerHTML = '';
            notifications.slice().reverse().forEach(n => {
                const historyEl = document.createElement('div');
                historyEl.className = 'bg-yankees-blue p-2 rounded-md flex justify-between items-center';
                historyEl.innerHTML = `
                    <div>
                        <p class="text-sm">${n.message}</p>
                        <p class="text-xs text-gray-400">Target: ${n.target}</p>
                    </div>
                    <button onclick="deleteNotification(${n.id})" class="text-red-400 hover:text-red-300 text-xs">Hapus</button>
                `;
                historyContainer.appendChild(historyEl);
            });
        }
        
        // --- EVENT HANDLERS & LOGIC ---

        document.getElementById('user-login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('user-username').value;
            const password = document.getElementById('user-password').value;
            const errorEl = document.getElementById('user-login-error');

            if (users[username] && users[username] === password) {
                loggedInUser = username;
                errorEl.classList.add('hidden');
                setBackground('dashboard');
                showView(userDashboard);
                renderUserDashboard();
            } else {
                errorEl.textContent = 'Nama Panggilan atau Kata Sandi salah.';
                errorEl.classList.remove('hidden');
            }
        });

        document.getElementById('admin-login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            const errorEl = document.getElementById('admin-login-error');

            if (username === 'admin' && password === 'admin123') {
                loggedInUser = 'admin';
                errorEl.classList.add('hidden');
                setBackground('dashboard');
                showView(adminDashboard);
                renderAdminDashboard();
            } else {
                errorEl.textContent = 'Nama Panggilan atau Kata Sandi salah.';
                errorEl.classList.remove('hidden');
            }
        });
        
        function logout() {
            loggedInUser = null;
            document.getElementById('user-login-form').reset();
            document.getElementById('admin-login-form').reset();
            document.getElementById('user-login-error').classList.add('hidden');
            document.getElementById('admin-login-error').classList.add('hidden');
            showInitialView();
        }

        document.getElementById('user-logout-btn').addEventListener('click', logout);
        document.getElementById('admin-logout-btn').addEventListener('click', logout);
        
        document.getElementById('add-lesson-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const day = document.getElementById('add-lesson-day').value;
            const name = document.getElementById('add-lesson-name').value;
            const time = document.getElementById('add-lesson-time').value;
            classSchedule[day].push({ subject: name, time: time });
            renderAdminClassSchedule();
            this.reset();
        });

        window.deleteLesson = function(day, index) {
            classSchedule[day].splice(index, 1);
            renderAdminClassSchedule();
        }
        
        document.getElementById('add-picket-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const day = document.getElementById('add-picket-day').value;
            const name = document.getElementById('add-picket-name').value;
            if (users[name] === undefined) { 
                users[name] = 'user123';
            }
            picketSchedule[day].push(name);
            renderAdminPicketSchedule();
            this.reset();
        });

        window.deletePicket = function(day, index) {
            picketSchedule[day].splice(index, 1);
            renderAdminPicketSchedule();
        }

        document.getElementById('send-notification-form').addEventListener('submit', function(e){
            e.preventDefault();
            const target = document.getElementById('notification-target').value;
            const message = document.getElementById('notification-message').value;
            notifications.push({ id: Date.now(), target, message });
            renderNotificationManager();
            this.reset();
        });
        
        window.deleteNotification = function(id) {
            notifications = notifications.filter(n => n.id !== id);
            renderNotificationManager();
        }

        // --- INITIALIZATION ---
        showInitialView();

    </script>
</body>
</html>


